import sys
import os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))



#from src/data/data_loader.py import spy_data, annualized_volatility
from src.data.data_loader import spy_data, annualized_volatility, datetime
from src.models.black_scholes import black_scholes

S = spy_data['Close'].iloc[-1] # Current SPY price
K = 550 # Example Strike Price
expiration_date = datetime(2025, 12, 19) # Example Expiration Date
valuation_date = datetime.now()
T = (expiration_date - valuation_date).days / 365.0 # Time to expiration in years
r = 0.04 # Risk-free rate (e.g., current U.S. 10-year treasury yield)
sigma = annualized_volatility # Volatility of SPY
option_type = 'call' # Type of option (call or put)

print(f"Current SPY Price (S): {S:.2f}")
print(f"Strike Price (K): {K:.2f}")
print(f"Time to Expiration (T): {T:.2f} years")
print(f"Risk-free Rate (r): {r:.4f}")
print(f"Estimated Annualized Volatility (sigma): {sigma:.4f}")
print(f"Option Type: {option_type.capitalize()}")

# Calculate option price
option_price = black_scholes(S, K, T, r, sigma, option_type)

print(f"\nBlack-Scholes {option_type.capitalize()} Option Price: {option_price:.2f}")